# For a detailed guide to building and testing on iOS, read the docs:
# https://circleci.com/docs/2.0/testing-ios/

version: 2.1

jobs:
  build:
    macos:
      xcode: 11.5.0 # Specify the Xcode version to use
    working_directory: /Users/distiller/project  
    shell: /bin/bash --login -o pipefail
    steps:
      - checkout
      - run: ./build-miniapps.sh $CIRCLE_BRANCH
      - run: echo -e "//npm.pkg.github.com/:_authToken=c362864c2539a07463a8e1067bfc1d817162c202 \nregistry=https://npm.pkg.github.com/WeConnect" > ./.npmrc
      - run: npm install
      - run: npm run build-main 
      - run: npm run build-renderer
      - run: npm run package
      - store_artifacts:
        path: /Users/distiller/project/builds
